# Stand Clear [of the closing doors]

## Backend

A go backend that interfaces with the MTA API and answers the question, when's the next train?

### Running

Can use `go run .` after cloning to start the web server OR
`go build .` to build an executable to start the web server

By default, this runs on localhost on port 8080, but you can change it.

**NEW**: can query using the deployed URI `stand-clear.vercel.app/api/arrivals` OR use the alias at `vedantmodi.com/stand-clear`.
Running an HTTP GET request with the parameters specified below will let you run the program.

Example: `curl 'https://www.vedantmodi.com/stand-clear?line=6&stop_id=640N'` will get you the upcoming Uptown departures of the 6 train from Brooklyn Bridge-City Hall. 

#### Endpoints

```

lines :=   A | C | E
         | B | D | F | FX | M
         | G
         | L
         | J | Z
         | N | Q | R | W
         | 1 | 2 | 3
         | 4 | 5 | 6 | 6X
         | 7 | 7X
         | GS
         | FS
         | H

Endpoint: /arrivals
Method: GET
Query Parameters:
    - line: What line you wish to know the times of. Must select exactly one line from lines defined above.
    - stop_id: What stop you wish to know the times of. Find the stop_id in subway_config/stops.txt and query based on that.
    - N: How many arrivals you wish to know about. Optional parameter, default 10.
Responses:
    Success (200):
        returns a list of arrivals object in JSON format
            each element of the list has
                - `line`: a string representing the line
                - `direction`: a string representing which direction the train is going
                    a "0" indicates north and a "1" indicates south. "north" and "south" are defined by the MTA.
                - `color`: a string representing the color of the line emblem as a hexcolor
                - `stop`: a string representing the stop_id. Follows the definition described in the parameter
                - `time_to_arrival`: a string representing the time to arrival *in seconds*
                - `friendly_stop`: a readable name for the stop

    Error (500):
        returns a JSON describing the error
            has a single file called message that contains the error thrown by the runtime.


```
